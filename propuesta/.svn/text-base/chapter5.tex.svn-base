\chapter{Aplicaciones del SI en Control de Sistemas MRS}

\section{Marco de Trabajo Basado en la Inmunidad para Control Multi-agente Distribuido \cite{HYKL06}} 

Especificidad, inducibilidad, diversidad, memoria, distinción entre propio y no propio (non self), autoregulación; son las principales características del sistema inmune humano, y las que permiten que utilizarlo en la solución de problemas en ingeniería.

El marco de control organiza un grupo de agentes en un entorno dinámico se desarrolla con base en el mecanismo distribuido de la inmunidad biológica. El Sistema Inmune (SI), es un tipo especial de sistema multi-agente donde cada elemento inmune tiene un patrón de comportamiento y funciones específicas para un antígeno particular. El comportamiento de dicho agente, depende del entorno, así como del comportamiento indicidual; además posee un grupo de capacidades específicas que determinan su inteligencia fundamental. Esta inteligencia puede ser alcanzada através de comunicación entre agentes o através de excploraciones del entorno.

Se adoptó una red de coontrol distribuida basada en el comportamiento, dicha red se basa en la transición de estado de comportamiento de los agentes; la operación de los agentes no está predeterminada, pero se altera dinpamicamente con el fín de adaptarse an entorno de trabajo. Este control distribuido y no-determinísstico herada las siguientes funciones del sistema inmune humano:

\begin{enumerate}
 \item \textbf{Auto-organización} Los agentes tienen la capacidad única de determinar respuestas para alcanzar objetivos comunes a través de toma de decisiones indepenientes y utilizando comunicaciones.
 \item \textbf{Reconocimiento de Self/Non-self} Los agentes identifican tareas durante su exploración aleatoria; para evaluar la estimulación de una tarea específica se utiliza la función de afinidad (un índice para identificación non-self). Este reconocimiento depende únicamente de la estimulación proporcionada por la tarea, los agentes no poseen información previa sobre sui localización o complejidad. Cada agente posee un set predefinido de capacidades, lo cual los hacen extremadamente flexibles para abordar diferentes tipos de problemas. 
 \item \textbf{Adaptabilidad} Los agentes ajustan sus comportamientos al atacar un problema, manipulando la mejor respuesta, evaluando la especificidad de sus capacidades. Se adquieren nuevos conocimientos o funcionalidades cuando se enfrentan a variaciones de tareas y entorno.
 \item \textbf{Robustez} La falla de un agente, mientras ejecuta una operación no paralizará el sistema; ya que el marco de control está encaminado a ser totalmente decentralizado y no se asignan dependencias fijas entre tareas y agentes.
 \item \textbf{Diversidad} El sistema es capáz de aprender de la experiencia, manipulando sus capacidades y realzando su inteligencia fundamental para resolver diferentes problemas.
\end{enumerate}

El marco de control proporciona un grupo de reglas que guían y determinan el comportamiento de un agente en respuesta a un entorno cambiante. Através de la manipulación de las reglas se pueden investigar de forma efectiva eventos desconocidos y variaciones dinámicas del sitio de trabajo. La figura \ref{control_flow} muestra el flujo de control de un agente SI. Primero realizan una exploración del entorno circundante dentro de su rango sensorial ($SR_S$). Basándose en la medición de afinidad, los agentes reconocen y se enfocan en una tarea. Una vez reconocida una tarea, el agente manipula sus capacidades con una función que recibe el nombre de \textit{matching específico} esto permite que el agente realice respuestas apropiadas al abordar diferentes tareas. Se definen cuatro tipos de respuestas inspiradas en el sistema inmune, ellas son: No específicas, específicas, adquiridas y pasivas.

\begin{figure}[ht]
\caption{Flujo de control de un agente del sistema inmune} \label{control_flow} 
\end{figure}

\subsection{Modelo Matemático}
Los atributos básicos de un marco de trabajo Sistema Inmune Artificial (SIA) incluyen un grupo de agentes que operan en el sistema ($A_j$), un grupo de tareas ($G_i$) que se encuentran localizadas en el sitio de trabajo ($Env=a_j \cup g_i  \forall i,j$), un rango sensorial ($SR$) de un agente que le permite adquirir o recibir información del entorno, y un rango de comunicaciones ($CR$) que premite el intercambio de información y/o mensajes entre agentes.

\subsubsection{Binding Affinity}
En la inmunidad biológica, la distancia no es lo único que concierne a la afinidad; la afinidad entre un anticuerpo y un antígeno involucra mucho procesos como reconocimiento de patrones, interacciones no covalentes, etc. De igual forma la función \textit{binding affinity} entre un agente y una tarea, está formada por tres parámetros: La distancia Manhattan ($d_{ij}$), la frecuencia de ocurrencia de la tarea y la función \textit{specificity matching} \footnote{Esta función compara cadenas con el fín de determinar el mejor  \textit{match} entre una tarea y el grupo de agentes disponibles}. La frecuencia de ocurrencia de tareas puede aumentar la afinidad entre un agente y un tipo particular de tarea, al evaluar el número de veces que un agente ha terminado de forma satisfactoria dicha tarea en el pasado, por lo que los agentes tienden a moverse a tareas mpas familiares.

$f_{ij}=\frac{O_i}{\displaystyle\sum_{x=1}^m O_x}$

donde: $O_i$ es el número de ocurrencias de la tarea  \textit{i} 

La función \textit{specificity matching} ($r_{ij}$) sigue el concepto de reconocimiento de patrones en la inmunidad biológica, y verifica al factibilidad para que un agente maneje una determinada tarea. En la naturaleza, el SI reconoce a los antígenos por su estructura, en este modelo, se transforma la coplejidad de la tarea en códigos de tal forma que los agentes puedan compararlos con sus capacidades.

$r_{ij}=\frac{1}{R_{I}^S \centerdot R_L}$

donde: $R_I$ es el índice para inteligencia relativa entre un agente y una tarea. $R_L$ es una medida de compatibilidad de matching entre la capacidad de un agente y la tarea; y $S$ es el puntaje relativo que resulta de la eficiencia entre la capacidad y la especificación de la tarea.

$\beta_{ij}=f(d_{ij}, f_{ij}, r_{ij})$ \\
$\beta_{ij}=\omega_1{(d_{ij})}^{-1} + \omega_2(f_{ij}) + \omega_3(r_{ij})$

donde $d_{ij} = \mid{x_i + x_j}\mid + \mid{y_i - y_j}\mid$

\subsection{Modelos de Cooperación}

\subsubsection{Estados de Conmportamiento de un agente SIA}
  La cooperación entre agentes SIA es el resultado de la comunicación y de interacciones simples 
\begin{center}
  \begin{table}[ht]
  \begin{tabular}{|l|c|p{10cm}|}
    \hline
     \textbf{Estado} & \textbf{Notación} & \textbf{Descripción}  \\ \hline
     Achieve   &   Ach    & Abordar la tarea sleccionada  \\ \hline
     Agitate   &   Ag     & Una tarea ha sido encontrada y el agente se enfoca en su objetivo. \\ \hline
     Cooperate &   Co     & Ofrece ayuda y participa en un trabajo cooperativo  \\ \hline
     Disperse  &   D      & Mantenerse Alejado de otros agentes si el número de agentes dentro de la zona
                            de exploración excede un umbral.\\ \hline
     Explore   &   E      & Explora el entorno circundante de forma aleatoria en búsuqeda de tareas \\ \hline
     Idle      &   I      & Espera a otros agentes para abordar una tarea de cooperación \\ \hline
     Reply     &   Rp     & Recive la señal \textit{help} de otro agente.\\ \hline
     Request   &   Rq     & Solicita ayuda de otros agentes.\\ \hline
  \end{tabular}
  \caption{Estados de Comportamiento de un Agente SIA} \label{states} 
  \end{table}
 
\end{center}

\subsubsection{Definiciones}


El j-ésimo agente $a_{j}^{CR_x}$ que está dentro del rango de comunicación $CR$ del agente $x$ $(CR_x)$ se define como:
\\
$a_{j}^{CR_x} \doteq \mid d_{xj}(M)\mid < CR_x$

El grupo de agentes $A^{CR_x}$ que se encuentra dentro del rango de comunicación del agente $x$ se define como:
\\
$A^{CR_x}=\{a_j \in a \mid a_j^{CR_x}\}$
\\
$\exists A^{CR_x}\in a_j$   $a_j^{CR_x} \wedge \neg (a_x)$

La señal de ayuda $h_x^i$ enviada por el agente $x$ para la i-ésima tarea se define como:
\\
$h_x^i=(a_x,g_i)$    $\forall A^{CR_x}$

La señal de respuesta $r_j^i$ enviada por el agente $j$ con relación a la solicitud de un agente $x$ se definie como:
\\
$r_j^i=(a_j,g_i,h_x^i)$    $\forall a_{j}^{CR_x}(E \cup D)$


\subsection{Interacción Entre Agentes SIA}

El concepto de restricciones de concentración está inspirado en la teoría auto-regulatoria de la inmunidad humana, la cual proporciona un mecanismo de regulación para controlar la concentración de anticuerpos via estimulación y supresión de la respuesta inmune. El SI produce anticuerpos cuando se presenta un antígeno y regresa al equilibrio cuando estos han sido removidos.

Asumiendo que hay $n$ agentes explorando el entorno y el umbral de concentración en la zona de exploración es $\tau$, los cambios estratégicos de comportamiento con restricciones de concentración son:
\\
$na(E) \rightarrow (n - \tau)a(D) \wedge \tau a(E)$       si  $n >  \tau$
Lo que nos indica que cuando el número de agentes exploradores es mayor que el umbral de concentración, únicamente  $\tau$ agentes se encuentran en estado de \textit{explore}, los restantes, $n - \tau$ deben cambiar al estado \textit{Disperse} y alejarse de esa zona de exploración.
\\
$na(E) \rightarrow na(E)$        si  $n \le  \tau$
Por el contrario, si el número de agentes en la zona de exploración es menor que el umbral de concentración, todos los agentes se encuentran en ele estado \textit{explore}.

Cuando un agente $x$ no puede completar una tarea por si solo, envía una señal de auxilio para activar a los agentes próximos a él, el agente $x$, por lo tanto, se encuentra en el estado \textit{request} $a_x(Rq)$. El agente que responde a este llamado $a_{j}^{CR_x}$ y puede ofrecer ayuda se define como:
\\
$ \forall a_{j}^{Rp} \in a_{j}^{CR_x}$,    $a_j(E \wedge D)$

La actividad de cooperación con control comportamental estratégico entre agentes SIA está definid como:
\\
$[a_x(Rq) \wedge a_y(Ry)] \rightarrow [a_x(I) \wedge a_y(Co)]$\\
El agente $x$ se encuentra en estado \textit{request} cuando envía la señal de auxilio, después cambia a estado \textit{idle} mientras llega la ayuda. El agente $y$ que responde a esta solicitud se encuentra en el estado \textit{reply} cuando recibe la señal y cambia al estado \textit{Cooperate} para ofrecer ayuda.
\\ 
$[a_x(I) \wedge a_y(Ag)] \rightarrow [a_x(Ach) \wedge a_y(Ach)]$\\
Inicialmente el agente $x$  se encuentra en estado \textit{Idle} esperando por ayuda, mientras que el agente $y$ se encuentra en estado \textit{agitate} aproximándose a la tarea cooperativa. Después el agente $y$ llega al sitio de la tarea cooperativa y la termina en el estado \textit{Achieve}.


\begin{figure}[ht]
\begin{center} \includegraphics[scale=.5]{./images/State_Transition_SIA}   \end{center}
\caption{Modelo de Transición de Estados de un agente SIA} \label{State_flow} 
\end{figure}


\subsection{Umbral de Afinidad}

El umbral de afinidad ($K_i$), es un valor dinámico que controla la activación o supresión de un agente al abordar una tarea $i$, de acuerdo con su índice de afinidad. Cuando la afinidad entre el agente $j$ y la tarea $i$ ($\beta_{ij}$) excede el valor de $K_i$, la actividad es permitida, de lo contrario es suprimida. Este umbral esta definido por: \\

$K_i=\frac{\displaystyle\sum_j{\beta_{ij}}}{\eta_{ij}\cdot \eta_{req} }$

donde: \\
$\beta_{ij}$ Es la \textit{afinidad} del agente $j$ para la tarea $i$\\
$\eta_{req}$ Es el número total de agentes que se requiere para abordar la tarea $i$\\

\subsection{Manipulación de la Respuesta del Marco de Control Basado en SIA}

\subsubsection{Cadena de Capacidades y Complejidades}

La estructura básica de todos los anticuerpos consta de dos pares de cadenas \textit{pesadas} y \textit{ligeras} (heavy \& light). la cadena pesada denota la calse del anticuerpo y especifíca la clase de respuesta, mientras que la ligera es distintiva antigénicamente y solo esta presente en una molécula de anticuerpo; la cadena ligera consiste de una serie de habilidades atómicas y es distintiva para cada respuesta. Esto se hace para imitar la estructura de un anticuerpo y para formar la cadena de capacidades para cada respuesta identificada en el marco de control.

Por otro lado, una tarea se representa como una cadena de complejidades, la cual tiene la misma estructura de la cadena de capacidades, de igual forma, la cadena ligera define la complejidad de la tarea. La complejidad especifica las capacidades requeridas que requiere un agente para abordar la tarea; con el fín de verificar la factibilidad de un agente para realizar una tarea se utiliza la función de \textit{matching específico}, la cual compara las cadenas ligeras de capacidades y complejidades.


Las tareas están divididas en ordinarias y cooperativas, las primeras pueden ser manejadas por un agente ordinario, mientras las cooperativas requieren más de un agente. Primero el agente verifica si la tarea requiere cooperación o no, si es una tarea cooperativa el agente se comunica con el agente \textit{iniciador} y realiza una respuesta pasiva, de lo contrario, si se trata de una tarea simple, chequea la capacidad de las cadenas no específicas y adquiridas, si no se encuentran coincidencias, el agente manipulará sus habilidades atómicas (en la cadena no-específica) para realizar una respuesta específica.

\begin{figure}[ht]
\begin{center} \includegraphics[scale=.5]{./images/response_man_algorithm}   \end{center}
\caption{Algoritmo de manipulación de respuesta} \label{response_man_algorithm} 
\end{figure}

\subsection{Metodología de Coincidencia Específica}

En inmunología, la activación de células inmunes (linfocitos) es activada por el reconocimiento de antígenos. Los linfocitos reconocen a los antígenos de forma estructural; siguiendo este concepto, de reconocimiento de patrones, se desarrolló un algoritmo de \textit{string matching} para comparar tareas y agentes, utilizando sus correspondientes cadenas de complejidad y capacidad. Las cadenas ligeras de agentes y tareas son comparadas con el fín de determinar si el agente es apto para manejar la tarea objetivo. En el \textit{matching específico} se investigan primero las cadenas de capacidades no-específicas (00) y adquiridas (01) ya que ellas proporcionan una respuesta rápida al método \textit{absolute string-matching} (Figura \ref{string_matching}), el cual, determina si el string completo de una cadena ligera de complejidades de una tarea puede encontrarse en la cadena ligera de capacidades de un agente y dar un resultado definitivo si las cadenas coinciden o no.

\begin{figure}[ht]
\begin{center} \includegraphics[scale=.5]{./images/string_matching}   \end{center}
\caption{Algoritmo \textit{Absolute String Matching}} \label{string_matching} 
\end{figure}


Cuando se obtiene una no coincidencia de las respuestas no-específica y adquirida, una respuesta específica manipulará nuevo conocimiento que sea capáz de abordar la tarea. La manipulación de capacidades recombina las habilidades atómicas elementales  de la cadena de capacidades no específica, para generar un nuevo set de capacidades específico a la nueva tarea ver Figura \ref{capability_man_process}. 

\begin{figure}[ht]
\begin{center} \includegraphics[scale=.5]{./images/capability_man_process}   \end{center}
\caption{Secuencia del proceso de manipulación de capacidades} \label{capability_man_process} 
\end{figure}


\subsubsection{Lógica de Control}
Haciendo un paralelo con el Sistema Inmune humano, el \textit{self} y \textit{non-self} de este marco de control corresponden a los agentes y las tareas. Los agentes SIA comienzan el ciclo de operación realizando movimientos pseudo-aleatorios; este modo de exploración libre permite a los agentes SIA identificar y aproximarse al \textit{non-self} (tareas) . Si el número de agentes SIA exploradores en una excede un umbral que define el \textit{sobrecupo} dentro de la zona de exploración, los agentes se dispersarán, con el fín de mantener una exploración eficiente. Una vez que un agente SIA sense una tarea, utilizará la función \textit{binding affinity} para reconocerla y aproximarse a ella. Esta función evalúa los factores físicos y especificidad de un agente para abordar la tarea. La figura \ref{control_logic} muestra la lógica de control del marco.

\begin{figure}[ht]
\begin{center} \includegraphics[scale=.35]{./images/control_logic}   \end{center}
\caption{Lógica de Control de un marco de control basado en ASI} \label{control_logic} 
\end{figure}


\subsubsection{Comportamiento de un Agente SIA}
Un agente SIA altera su comportamiento monitoreando el entorno; los diferentes estados y sus estrategias correspondientes se muestran en la tabla \ref{states}. Para abordar una tarea, una agente SIA exhibe diferentes comportamientos, los cuales se representan en la Figura \ref{State_flow}. Los cambios de estado son gobernados por un grupo de reglas evento-condición-acción, dichas reglas permiten que los agentes SIA realicen respuestas bajo diferentes situaciones; de acuerdo con estas reglas, los agentes obtienen información através de comunicación entre ellos, esta información incluye localización de tareas, señales de auxilio, y estados de comportamiento de otros agentes; toda esta información permite a los agentes coordinar planes de acción para diferentes tipos de tareas. La Figura \ref{Decision_tree} muestra el árbol de decisiones que define las acciones de los agentes SIA, este árbol muestra como los agentes se adaptan a cambios en el entorno y se comportan de forma autónoma abordando tareas.

\begin{figure}[ht]
\begin{center} \includegraphics[scale=.55]{./images/Decision_tree}   \end{center}
\caption{Arbol de decisiones que define las acciones de un agente SIA} \label{Decision_tree} 
\end{figure}